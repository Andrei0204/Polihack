Index: app/src/main/java/com/example/telefonapp/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.telefonapp;\r\n\r\nimport android.bluetooth.BluetoothAdapter;\r\nimport android.bluetooth.BluetoothDevice;\r\nimport android.bluetooth.BluetoothSocket;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport com.example.telefonapp.R;\r\n\r\nimport java.io.BufferedInputStream;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.util.UUID;\r\nimport java.util.concurrent.RecursiveTask;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private final String DEVICE_ADDRESS = \"00:13:EF:00:1B:41\"; // Replace with HC-06 MAC Address\r\n    private final UUID UUID_INSECURE = UUID.fromString(\"00001101-0000-1000-8000-00805F9B34FB\");\r\n\r\n    private BluetoothAdapter bluetoothAdapter;\r\n    private BluetoothSocket bluetoothSocket;\r\n    private TextView textView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        textView = findViewById(R.id.textView);\r\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n\r\n        if (bluetoothAdapter == null) {\r\n            Toast.makeText(this, \"Bluetooth not supported\", Toast.LENGTH_SHORT).show();\r\n            finish();\r\n        }\r\n\r\n        if (!bluetoothAdapter.isEnabled()) {\r\n            Toast.makeText(this, \"Enable Bluetooth\", Toast.LENGTH_SHORT).show();\r\n            finish();\r\n        }\r\n\r\n        connectToDevice();\r\n    }\r\n\r\n    //    private void connectToDevice() {\r\n//        BluetoothDevice device = bluetoothAdapter.getRemoteDevice(DEVICE_ADDRESS);\r\n//\r\n//        try {\r\n//            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n//                return;\r\n//            }\r\n//                bluetoothSocket = device.createRfcommSocketToServiceRecord(UUID_INSECURE);\r\n//            bluetoothSocket.connect();\r\n//\r\n//            InputStream inputStream = bluetoothSocket.getInputStream();\r\n//            OutputStream outputStream = bluetoothSocket.getOutputStream();\r\n//\r\n//            // Read data from Bluetooth\r\n//            new Thread(() -> {\r\n//                byte[] buffer = new byte[1024];\r\n//                int bytes;\r\n//\r\n//                while (true) {\r\n//                    try {\r\n//                        bytes = inputStream.read(buffer);\r\n//                        String received = new String(buffer, 0, bytes);\r\n//                        runOnUiThread(() -> textView.setText(received)); // Display received data\r\n//                    } catch (Exception e) {\r\n//                        e.printStackTrace();\r\n//                        break;\r\n//                    }\r\n//                }\r\n//            }).start();\r\n//\r\n//        } catch (Exception e) {\r\n//            e.printStackTrace();\r\n//            Toast.makeText(this, \"Failed to connect\", Toast.LENGTH_SHORT).show();\r\n//        }\r\n//    }\r\n    private void connectToDevice() {\r\n        BluetoothDevice device = bluetoothAdapter.getRemoteDevice(DEVICE_ADDRESS);\r\n\r\n        try {\r\n            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n                return;\r\n            }\r\n\r\n            bluetoothSocket = device.createRfcommSocketToServiceRecord(UUID_INSECURE);\r\n            bluetoothSocket.connect();\r\n\r\n            InputStream inputStream = new BufferedInputStream(bluetoothSocket.getInputStream());\r\n            OutputStream outputStream = bluetoothSocket.getOutputStream();\r\n\r\n            // Read data from Bluetooth \r\n            new Thread(() -> {\r\n                byte[] buffer = new byte[1024]; // Buffer to hold incoming bytes\r\n                int bytes; // Number of bytes read\r\n                StringBuilder dataBuilder = new StringBuilder(); // Accumulate received data\r\n\r\n                while (true) {\r\n                    try {\r\n                        bytes = inputStream.read(buffer);\r\n                        if (bytes > 0) {\r\n                            String received = new String(buffer, 0, bytes, \"UTF-8\"); // Decode bytes to String\r\n                            dataBuilder.append(received); // Append received data to the StringBuilder\r\n\r\n                            runOnUiThread(() -> {\r\n                                // Display received data in the TextView\r\n                                textView.setText(dataBuilder.toString());\r\n                            });\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                        runOnUiThread(() ->\r\n                                Toast.makeText(this, \"Connection lost\", Toast.LENGTH_SHORT).show()\r\n                        );\r\n                        break;\r\n                    }\r\n                }\r\n            }).start();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(this, \"Failed to connect\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/telefonapp/MainActivity.java b/app/src/main/java/com/example/telefonapp/MainActivity.java
--- a/app/src/main/java/com/example/telefonapp/MainActivity.java	(revision 5fb292f3e5e097facf3efec6273b2d59f3807454)
+++ b/app/src/main/java/com/example/telefonapp/MainActivity.java	(date 1733652228573)
@@ -89,11 +89,14 @@
 
         try {
             if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {
+             //   Toast.makeText(this, "Connected", Toast.LENGTH_SHORT).show();
                 return;
             }
 
             bluetoothSocket = device.createRfcommSocketToServiceRecord(UUID_INSECURE);
             bluetoothSocket.connect();
+            Toast.makeText(this, "Connected", Toast.LENGTH_SHORT).show();
+
 
             InputStream inputStream = new BufferedInputStream(bluetoothSocket.getInputStream());
             OutputStream outputStream = bluetoothSocket.getOutputStream();
